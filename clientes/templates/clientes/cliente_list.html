{% extends "clientes/base.html" %}
{% block title %}Clientes{% endblock %}
{% block content %}
  <form class="row g-2 mb-3">
    <div class="col-auto">
      <input name="q" class="form-control" placeholder="Buscar por nombre" value="{{ request.GET.q }}">
    </div>
    <div class="col-auto">
      <button class="btn btn-primary">Buscar</button>
      <a class="btn btn-secondary" href="{% url 'clientes:list' %}">Limpiar</a>
    </div>
  </form>

  <div class="card">
    <div class="card-body p-0">
      <table class="table table-striped m-0">
        <thead>
          <tr><th>Clave</th><th>Nombre</th><th>Email</th><th>Teléfono</th><th></th></tr>
        </thead>
        <tbody>
          {% for c in clientes %}
          <tr>
            <td>{{ c.clave }}</td>
            <td><a href="{% url 'clientes:detail' c.pk %}">{{ c.nombre }}</a></td>
            <td>{{ c.email }}</td>
            <td>{{ c.telefono }}</td>
            <td class="text-end">
              <a class="btn btn-sm btn-outline-primary" href="{% url 'clientes:update' c.pk %}">Editar</a>
              <a class="btn btn-sm btn-outline-danger" href="{% url 'clientes:delete' c.pk %}">Eliminar</a>
            </td>
          </tr>
          {% empty %}
          <tr><td colspan="5" class="text-center p-3">Sin registros</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  {% if is_paginated %}
    <nav class="mt-3">
      <ul class="pagination">
        {% if page_obj.has_previous %}
          <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">Anterior</a></li>
        {% endif %}
        <li class="page-item disabled"><span class="page-link">Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}</span></li>
        {% if page_obj.has_next %}
          <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">Siguiente</a></li>
        {% endif %}
      </ul>
    </nav>
  {% endif %}
{% endblock %}
